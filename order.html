<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Food Website</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <!-----------------------------HEADER----------------------------->

    <nav>
        <div class="logo">
            <a href="index.html"><img src="logo.png"></a>
        </div>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#About">About</a></li>
            <li><a href="index.html#Menu">Menu</a></li>
            <li><a href="index.html#Team">Team</a></li>
            <li><a href="index.html#Order">Order</a></li>
        </ul>
        <div class="icon">
            <a href="search.html"><i class="fa-solid fa-magnifying-glass"></i></a>
            <a href="favourites.html"><i class="fa-solid fa-heart"></i></a>
            <a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
        </div>
    </nav>

    <!-----------------------------ORDER CHECKOUT SECTION----------------------------->

    <div class="order_checkout_container">
        <div class="order_checkout_header">
            <h1>Complete Your<span>Order</span></h1>
            <p>Review your items and provide delivery details</p>
        </div>

        <div class="order_checkout_main">
            <!-- Order Summary Section -->
            <div class="order_summary_section">
                <h2>Order Summary</h2>
                <div id="orderSummary" class="order_summary_items">
                    <!-- Items from cart will be displayed here -->
                </div>
                <div class="order_summary_totals">
                    <div class="total_row">
                        <span>Subtotal</span>
                        <span id="orderSubtotal">â‚¹0.00</span>
                    </div>
                    <div class="total_row">
                        <span>Delivery Fee</span>
                        <span id="orderDelivery">â‚¹0.00</span>
                    </div>
                    <div class="total_row">
                        <span>Tax (10%)</span>
                        <span id="orderTax">â‚¹0.00</span>
                    </div>
                    <div class="total_divider"></div>
                    <div class="total_row final">
                        <span>Total Amount</span>
                        <span id="orderTotal">â‚¹0.00</span>
                    </div>
                </div>
            </div>

            <!-- Delivery Form Section -->
            <div class="delivery_form_section">
                <h2>Delivery Details</h2>
                <form id="orderForm">
                    <div class="form_group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                    </div>

                    <div class="form_row">
                        <div class="form_group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="email" placeholder="Enter your email" required>
                        </div>
                        <div class="form_group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
                        </div>
                    </div>

                    <div class="form_group">
                        <label for="address">Street Address *</label>
                        <input type="text" id="address" name="address" placeholder="Enter your street address" required>
                    </div>

                    <div class="form_row">
                        <div class="form_group">
                            <label for="city">City *</label>
                            <input type="text" id="city" name="city" placeholder="Enter your city" required>
                        </div>
                        <div class="form_group">
                            <label for="zipcode">Zip Code *</label>
                            <input type="text" id="zipcode" name="zipcode" placeholder="Enter your zip code" required>
                        </div>
                    </div>

                    <div class="form_group">
                        <label for="notes">Special Instructions (Optional)</label>
                        <textarea id="notes" name="notes" placeholder="Add any special delivery instructions..."
                            rows="3"></textarea>
                    </div>

                    <div class="form_group payment">
                        <label for="paymentMethod">Payment Method *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="">Select payment method</option>
                            <option value="cod">Cash on Delivery</option>
                            <option value="card">Credit/Debit Card</option>
                            <option value="upi">UPI</option>
                            <option value="wallet">Digital Wallet</option>
                        </select>
                    </div>

                    <div class="form_actions">
                        <button type="button" class="cancel_btn" onclick="window.location.href='cart.html'">
                            <i class="fa-solid fa-arrow-left"></i> Back to Cart
                        </button>
                        <button type="submit" class="place_order_btn">
                            <i class="fa-solid fa-check"></i> Place Order
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-----------------------------FOOTER------------------------------>

    <footer>
        <div class="footer_main">

            <div class="footer_tag">
                <h2>Location</h2>
                <p>Mumbai</p>
                <p>Pune</p>
                <p>Palghar</p>
                <p>Thane</p>
                <p>Nagpur</p>
            </div>

            <div class="footer_link">
                <h2>Quick Link</h2>
                <div class="quick_link">
                    <a href="index.html">
                        <p>Home</p>
                    </a>
                    <a href="index.html#About">
                        <p>About</p>
                    </a>
                    <a href="index.html#Menu">
                        <p>Menu</p>
                    </a>
                    <a href="index.html#Team">
                        <p>Team</p>
                    </a>
                    <a href="index.html#Order">
                        <p>Order</p>
                    </a>
                </div>
            </div>

            <div class="footer_tag">
                <h2>Contact</h2>
                <p>+91 83290 26125</p>
                <p>jadhavyash1307@gmail.com</p>
                <p>foodshop123@gmail.com</p>
            </div>

            <div class="footer_tag">
                <h2>Our Services</h2>
                <p>Fast Delivery</p>
                <p>Easy Payments</p>
                <p>24 Ã— 7 Service</p>
            </div>

            <div class="footer_tag">
                <h2>Follows</h2>
                <i class="fa-brands fa-facebook-f"></i>
                <i class="fa-brands fa-twitter"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-linkedin-in"></i>
            </div>

        </div>
    </footer>

    <script>
        // Menu items data
        const menuItems = {
            1: { name: 'Burger', price: 80, originalPrice: 85, image: 'burger.png' },
            2: { name: 'Pasta', price: 70, originalPrice: 80, image: 'pasta.png' },
            3: { name: 'Pizza', price: 100, originalPrice: 120, image: 'pizza.png' },
            4: { name: 'Sandwich', price: 40, originalPrice: 50, image: 'sandwich.png' },
            5: { name: 'Biryani', price: 200, originalPrice: 220, image: 'biryani.png' },
            6: { name: 'Chocolate drink', price: 50, originalPrice: 55, image: 'chocolate drink.png' },
            7: { name: 'Juice', price: 25, originalPrice: 30, image: 'juice.png' },
            8: { name: 'Ice Cream', price: 60, originalPrice: 70, image: 'ice cream.png' }
        };

        // Get cart from localStorage
        function getCart() {
            const cart = localStorage.getItem('cart');
            return cart ? JSON.parse(cart) : [];
        }

        // Display order summary
        function displayOrderSummary() {
            const cart = getCart();
            const orderSummary = document.getElementById('orderSummary');

            if (cart.length === 0) {
                orderSummary.innerHTML = `
                    <div class="empty_order">
                        <i class="fa-solid fa-inbox"></i>
                        <p>Your cart is empty. Please add items before ordering.</p>
                        <a href="cart.html" class="empty_order_btn">Go to Cart</a>
                    </div>
                `;
                document.querySelector('.delivery_form_section').style.display = 'none';
                return;
            }

            let html = '';
            let subtotal = 0;

            cart.forEach(cartItem => {
                const product = menuItems[cartItem.id];
                if (product) {
                    const itemTotal = product.price * cartItem.quantity;
                    subtotal += itemTotal;
                    html += `
                        <div class="order_summary_item">
                            <div class="summary_item_image">
                                <img src="${product.image}" alt="${product.name}">
                            </div>
                            <div class="summary_item_details">
                                <h4>${product.name}</h4>
                                <p>â‚¹${product.price}.00 Ã— ${cartItem.quantity}</p>
                            </div>
                            <div class="summary_item_total">
                                â‚¹${itemTotal}.00
                            </div>
                        </div>
                    `;
                }
            });

            orderSummary.innerHTML = html;
            updateOrderTotals(subtotal);
        }

        // Update order totals
        function updateOrderTotals(subtotal) {
            const deliveryFee = subtotal > 0 ? 50 : 0;
            const tax = Math.round((subtotal * 10) / 100);
            const total = subtotal + deliveryFee + tax;

            document.getElementById('orderSubtotal').textContent = `â‚¹${subtotal}.00`;
            document.getElementById('orderDelivery').textContent = `â‚¹${deliveryFee}.00`;
            document.getElementById('orderTax').textContent = `â‚¹${tax}.00`;
            document.getElementById('orderTotal').textContent = `â‚¹${total}.00`;
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#fac031' : '#ff6b6b'};
                color: white;
                padding: 15px 25px;
                border-radius: 5px;
                z-index: 10000;
                animation: slideInNotif 0.3s ease-out;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutNotif 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Handle form submission
        document.getElementById('orderForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const cart = getCart();
            if (cart.length === 0) {
                showNotification('Cart is empty!', 'remove');
                return;
            }

            const formData = {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                zipcode: document.getElementById('zipcode').value,
                notes: document.getElementById('notes').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                items: cart,
                orderDate: new Date().toLocaleString(),
                totalAmount: document.getElementById('orderTotal').textContent
            };

            // Save order to localStorage
            let orders = JSON.parse(localStorage.getItem('orders')) || [];
            orders.push(formData);
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart after successful order
            localStorage.setItem('cart', JSON.stringify([]));

            showNotification('Order placed successfully! ðŸŽ‰', 'success');

            // Redirect to invoice/bill page
            setTimeout(() => {
                window.location.href = 'bill.html';
            }, 1500);
        });

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInNotif {
                from {
                    opacity: 0;
                    transform: translateX(100px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            @keyframes slideOutNotif {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(100px);
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function () {
            displayOrderSummary();
        });
    </script>

</body>

</html>